<h2 class="mt-6 text-2xl font-semibold text-gray-700 dark:text-gray-200">
  Restaurants
</h2>

<div class="relative w-full focus-within:text-purple-500">
  <div class="absolute inset-y-0 flex items-center pl-2">
    <svg class="w-4 h-4" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20">
      <path fill-rule="evenodd"
        d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
        clip-rule="evenodd"></path>
    </svg>
  </div>
  <input
    class="w-full pl-8 pr-2 py-2 text-sm text-gray-700 placeholder-gray-600 bg-gray-100 border-0 rounded-md dark:placeholder-gray-500 dark:focus:shadow-outline-gray dark:focus:placeholder-gray-600 dark:bg-gray-700 dark:text-gray-200 focus:placeholder-gray-500 focus:bg-white focus:border-purple-300 focus:outline-none focus:shadow-outline-purple form-input"
    type="text" placeholder="Search for restaurants" aria-label="Search" (keyup)="handleKeyUpEvent($event)">
</div>

<ng-container *ngIf="restaurants$ | async as restaurants; else loadingOrError">

  <div class="text-sm text-gray-700 dark:text-gray-200 mb-6">
    {{restaurants.length}} restaurants found near you
  </div>

  <div *ngFor="let restaurant of restaurants" class="min-w-0 p-4 mb-4 bg-white rounded-lg shadow-xs dark:bg-gray-800">
    <h4 class="mb-4 font-semibold text-gray-600 dark:text-gray-300">
      {{restaurant.name}}
    </h4>


    <p class="text-gray-600 dark:text-gray-400 mb-4">
      Lorem ipsum dolor sit, amet consectetur adipisicing elit.
      Fuga, cum commodi a omnis numquam quod? Totam exercitationem
      quos hic ipsam at qui cum numquam, sed amet ratione! Ratione,
      nihil dolorum.
    </p>

    <div class="text-gray-600 flex">
      <div class="flex justify-center items-center mr-6">
        <mat-icon>place</mat-icon>
        <span class="font-bold">
          {{restaurant.city}}
        </span>
      </div>

      <div class="flex justify-center items-center mr-6">
        <mat-icon>star</mat-icon>
        <mat-icon>star</mat-icon>
        <mat-icon>star</mat-icon>
        <mat-icon>star_half</mat-icon>
      </div>

      <div class="grow">
      </div>

      <button
        class="flex items-center justify-between px-4 py-2 text-sm font-medium leading-5 text-white transition-colors duration-150 bg-purple-600 border border-transparent rounded-lg active:bg-purple-600 hover:bg-purple-700 focus:outline-none focus:shadow-outline-purple">
        <mat-icon>delivery_dining</mat-icon>
        <span>Order</span>
      </button>
    </div>
  </div>
</ng-container>

<ng-template #loadingOrError>
  <ng-container *ngIf="error; else loading">
    <div>{{error}}</div>
  </ng-container>
</ng-template>

<ng-template #loading>
  <div class="flex justify-center items-center overflow-hidden h-screen">
    <div class="animate-spin inline-block w-8 h-8 border-t-2 border-r-2 border-purple-600 rounded-full" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>
</ng-template>
